/*!
 * pixometric - v0.0.3
 * Compiled Wed, 05 Jul 2017 12:32:22 UTC
 *
 * pixometric is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.pixometric=e()}}(function(){return function e(r,t,i){function o(a,f){if(!t[a]){if(!r[a]){var c="function"==typeof require&&require;if(!f&&c)return c(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=t[a]={exports:{}};r[a][0].call(s.exports,function(e){var t=r[a][1][e];return o(t||e)},s,s.exports,e,r,t,i)}return t[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={CHUNK:{SIZE:16,HEIGHT:16}};t.default=i},{}],2:[function(e,r,t){"use strict";function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=e("../world/world"),n=(function(e){e&&e.__esModule}(o),function e(r,t,o,n){i(this,e),this.world=t,e.stage=r,e.textures=o,e.textureLookup=n});t.default=n},{"../world/world":5}],3:[function(e,r,t){"use strict";function i(e){var r;return(r=[]).length=e,r.fill(0)}function o(e,r){var t;(t=[]).length=e;for(var i=0;i<e;i++)t[i]=r;return t}function n(e,r){var t;(t=[]).length=e;for(var i=0;i<e;i++)t[i]=new r;return t}function a(e,r){var t;(t=[]).length=e;for(var i=0;i<e;i++)(t[i]=[]).length=r,t[i].fill(0);return t}function f(e,r,t){var i;(i=[]).length=e;for(var o=0;o<e;o++){(i[o]=[]).length=r;for(var n=0;n<r;n++)i[o][n]=t}return i}function c(e,r,t){var i;(i=[]).length=e;for(var o=0;o<e;o++){(i[o]=[]).length=r;for(var n=0;n<r;n++)i[o][n]=new t}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.generate=i,t.generateFilled=o,t.generateFilledClasses=n,t.generate2D=a,t.generate2DFilled=f,t.generate2DFilledClasses=c},{}],4:[function(e,r,t){"use strict";function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=e("../helpers/array"),n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(o),a=function e(r,t){i(this,e),this.voxels=n.generateFilled(Pixometric.config.CHUNK.SIZE*Pixometric.config.CHUNK.SIZE*Pixometric.config.CHUNK.HEIGHT,1),this.sprites=[],this.x=r,this.y=t};t.default=a},{"../helpers/array":3}],5:[function(e,r,t){"use strict";function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),n=e("./chunk"),a=function(e){return e&&e.__esModule?e:{default:e}}(n),f=e("../helpers/array"),c=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(f),l=function(){function e(){i(this,e),this.aoL=c.generate2DFilledClasses(3,3,a.default),this.rotation=3}return o(e,[{key:"generateSprites",value:function(){for(var e=0;e<this.aoL.length;e++)for(var r=0;r<this.aoL[0].length;r++){switch(this.rotation){case 0:var t=e,i=r;break;case 1:var t=this.aoL.length-r-1,i=e;break;case 2:var t=this.aoL.length-e-1,i=this.aoL[0].length-r-1;break;case 3:var t=r,i=this.aoL[0].length-e-1}for(var o=0;o<this.aoL[t][i].voxels.length;o++){var n=o%Pixometric.config.CHUNK.SIZE,a=Math.floor(o/Pixometric.config.CHUNK.SIZE)%Pixometric.config.CHUNK.SIZE,f=Math.floor(o/(Pixometric.config.CHUNK.SIZE*Pixometric.config.CHUNK.SIZE));switch(this.rotation){case 0:var c=f,l=a;break;case 1:var c=Pixometric.config.CHUNK.SIZE-a-1,l=f;break;case 2:var c=Pixometric.config.CHUNK.SIZE-f-1,l=Pixometric.config.CHUNK.SIZE-a-1;break;case 3:var c=a,l=Pixometric.config.CHUNK.SIZE-f-1}var s=n+l*Pixometric.config.CHUNK.SIZE+c*Pixometric.config.CHUNK.SIZE*Pixometric.config.CHUNK.SIZE,u=this.aoL[t][i].voxels[s];if(0!=u){var h=16*(f-a+(e-r)*Pixometric.config.CHUNK.SIZE),g=8*(f+a+(e+r)*Pixometric.config.CHUNK.SIZE)-16*n,d=new PIXI.Sprite(Pixometric.textures[Pixometric.textureLookup[u-1]]);this.aoL[e][r].sprites[o]=d,d.x=h,d.y=g,Pixometric.stage.addChild(d)}}}}},{key:"rotate",value:function(e){this.rotation=e;for(var r=0;r<this.aoL.length;r++)for(var t=0;t<this.aoL[0].length;t++)for(var i=0;i<this.aoL[0][0].sprites.length;i++)this.aoL[r][t].sprites[i]&&this.aoL[r][t].sprites[i].destroy();this.generateSprites()}},{key:"occlusionCulling",value:function(){for(var e=0;e<this.aoL.length;e++)for(var r=0;r<this.aoL[0].length;r++)for(var t=0;t<Pixometric.config.CHUNK.SIZE;t++)for(var i=0;i<Pixometric.config.CHUNK.SIZE;i++)this.cull(e,r,t,i,Pixometric.config.CHUNK.HEIGHT-1);for(var e=0;e<this.aoL.length;e++)for(var t=0;t<Pixometric.config.CHUNK.SIZE;t++)for(var o=0;o<Pixometric.config.CHUNK.HEIGHT-1;o++)this.cull(e,this.aoL[0].length-1,t,Pixometric.config.CHUNK.SIZE,o);for(var r=0;r<this.aoL[0].length;r++)for(var i=0;i<Pixometric.config.CHUNK.SIZE;i++)for(var o=0;o<Pixometric.config.CHUNK.HEIGHT-1;o++)this.cull(this.aoL.length-1,r,Pixometric.config.CHUNK.SIZE-1,i,o)}},{key:"cull",value:function(e,r,t,i,o){for(var n=!1;;){if(o<0)break;if(i<0){if(r-1<0)break;r--,i=Pixometric.config.CHUNK.SIZE-1}if(t<0){if(e-1<0)break;e--,t=Pixometric.config.CHUNK.SIZE-1}var a=o+i*Pixometric.config.CHUNK.SIZE+t*Pixometric.config.CHUNK.SIZE*Pixometric.config.CHUNK.SIZE;0!=this.aoL[e][r].voxels[a]&&(n?this.aoL[e][r].sprites[a]&&(this.aoL[e][r].sprites[a].visible=!1):n=!0),t--,i--,o--}}}]),e}();t.default=l},{"../helpers/array":3,"./chunk":4}],6:[function(e,r,t){(function(r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var i=e("./core/core"),o=t(i),n=e("./core/config"),a=t(n),f=e("./world/world"),c=t(f);o.default.config=a.default,o.default.World=c.default,r.Pixometric=o.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core/config":1,"./core/core":2,"./world/world":5}]},{},[6])(6)});
//# sourceMappingURL=pixometric.min.js.map
